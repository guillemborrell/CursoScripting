\documentclass[12pt,mathserif,compress]{beamer}

\beamertemplateshadingbackground{black!5}{black!20}
\usepackage[spanish]{babel}
\usepackage{times}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage{tikz}
\usepackage{listings}

%\usepackage{pgfpages}
%\pgfpagesuselayout{4 on 1}[a4paper,border shrink=5mm]

\renewcommand\shorthandsspanish{}
\noextrasspanish

\title{Python}
\author{Guillem Borrell i Nogueras}

\begin{document}

\lstset{language=Python,
  backgroundcolor=\color{white},
  numbers=left,
  basicstyle=\small\ttfamily,
  keywordstyle=\color{blue},
  extendedchars=true,
  inputencoding=utf8,
  showspaces=false}

\begin{frame}
\begin{center}
 \includegraphics[width=9cm]{files/python-logo-generic.pdf}\\
 % python-logo-generic.pdf: 389x115 pixel, 72dpi, 13.72x4.06 cm, bb=0 0 389 115
\vspace{1cm}
Guillem Borrell i Nogueras\\

Físicas UCM, 18 Nov 2009
\end{center}
\end{frame}

\begin{frame}
  \frametitle{¿De qué hablará este?}
  \tableofcontents
\end{frame}
\section{¿Quién es este?}
\begin{frame}
  \frametitle{Antes de empezar}
  \begin{itemize}
  \item Guillem Borrell i Nogueras.
    \begin{itemize}
    \item  \url{http://guillemborrell.es/}
    \end{itemize}
  \item Ingeniero Aeronáutico
    \begin{itemize}
    \item Nunca me han gustado especialmente los aviones
    \end{itemize}
  \item Laboratorio de Mecánica de Fluidos Computacional
    \begin{itemize}
    \item Turbulencia en pared
    \end{itemize}
  \item Consultor de Englobe Technologies
    \begin{itemize}
    \item Supercomputación
    \end{itemize}
  \end{itemize}
\end{frame}

\begin{frame}
\frametitle{El software libre y un servidor}
\begin{itemize}
\item Empecé programando en Basic con un MSX y un monitor monocromo
  \textcolor{orange}{naranja}. Me gustaba.
\pause
\item Mis padres me compraron un PC con windows 3.11. Aprendí
  MS-DOS.
\pause
\item Windows 95 me hizo odiar el ordenador. Lo usaba para jugar al
  Civilization II.
\pause
\item En 3º un colega teleco me pasó un Red Hat 8.  Usé Octave para
  mis prácticas de Numérico II.
\end{itemize}
\end{frame}

\begin{frame} \frametitle{Entonces llegó un verano de insomnio}
\begin{center}
 \includegraphics[width=\textwidth]{files/insomnio-ovejas.png}\\
\end{center}
\end{frame}

\begin{frame}
  \begin{center}
    Recordé lo bien que lo pasaba con el MSX de pequeño.
  \end{center}
\end{frame}

\begin{frame}
  \frametitle{Instalé un cluster casero en Gentoo Linux}
  \begin{center}
 \includegraphics[width=0.8\textwidth]{files/ucs_Cray1_install.jpg}    
  \end{center}
\end{frame}

\begin{frame}
  \frametitle{Escribí un libro sobre Matlab y Octave}
  \begin{center}
  \includegraphics[height=0.6\textheight]{files/portada.jpg}    
  \end{center}
\end{frame}

\begin{frame}
  \begin{center}
    El insomnio no se fue, así que me tomé un año sabático.
  \end{center}
\end{frame}

\begin{frame}
  \frametitle{Aprendí cosas que no se enseñan en la Universidad}
Y menos aún en la Escuela de Aeronáuticos
\begin{itemize}
\item C y C++
\pause
\item Administración Linux
\pause
\item Redes
\pause
\item \textcolor{red}{\textbf{Python}}
\end{itemize}
\end{frame}

\section{¿Qué es Python?}

\begin{frame}
\frametitle{Python...}
\begin{center}
El lenguaje más versátil y consistente del mundo debe su nombre a...
\end{center}

\end{frame}

\begin{frame}
  \frametitle{Monty Python}
  \begin{center}
  \includegraphics[width=0.8\textwidth]{files/python.jpg}    
  \end{center}
\end{frame}


\begin{frame}
  \frametitle{¿Qué es?}
Lenguaje de programación
\begin{itemize}
\item Interpretado
\item Interactivo
\item Dinámico
\item Modular
\item Orientado a objetos
\item Ampliable
\item Consistente
\end{itemize}
\end{frame}

\begin{frame}
  \begin{center}
  ¿Qué significa consistencia?    
  \end{center}
\end{frame}

\begin{frame}
  \frametitle{The Zen of Python \#13}
  \begin{center}
      \textit{Debe haber una ---mejor si es sólo una--- manera obvia de
    hacer algo}
  \end{center}
\end{frame}

\begin{frame}
  \frametitle{Interpretado}
  \begin{itemize}
  \item Python no se traduce a código máquina como C 
  \item Un compilador lo traduce a ensamblador que entiende una
    máquina virtual
  \item La máquina virtual es \emph{portable}
\pause
\item Muy portable. La \emph{misma} máquina se puede compilar en \pause
  Windows, \pause Linux, \pause Solaris, \pause AIX, \pause HP-UX,
  \pause BSD, \pause S60...
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Interactivo}
  \begin{center}
  \includegraphics[width=0.8\textwidth]{files/interprete.png}    
  \end{center}
\end{frame}

\defverbatim[colored]\testcode{
\begin{lstlisting}
>>> 4.5*'hola'
TypeError: can't multiply sequence by ...
\end{lstlisting}
}
\begin{frame}
  \frametitle{Dinámico}
  \begin{itemize}
  \item No es necesario declarar variables
  \item No es necesario tipar argumentos
  \item Las variables cambian de tipo por asignación
\pause
  \item No hay conversiones de tipo implícitas
  \end{itemize}
\testcode
\end{frame}

\begin{frame}
  \frametitle{Duck Typing}
\begin{center}
\begin{tikzpicture}
\draw node[text width=0.9\textwidth, rounded corners, fill=red!20,
draw=red]
{
Si algo anda como un pato y cuaquea como un pato para mí es un pato
};
\end{tikzpicture}
\end{center}
\begin{enumerate}
\item Creamos la clase \emph{pato}
\item Creamos la clase \emph{guillem}
\pause
\item Ambos podemos decir ¡Quac!
\pause
\item Si una función llama al método \emph{cuaquea} le da igual que el
  argumento sea \emph{pato} o \emph{guillem} mientras diga ¡Quac!
\end{enumerate}
\end{frame}

\begin{frame}
  \frametitle{Modular}
  \begin{itemize}
  \item Cada archivo que contenga funciones es un módulo
  \item Cada directorio que contenga el archivo \texttt{\_\_init\_\_.py}
    es un módulo
  \item Tenemos la palabra clave \texttt{import}
  \item Necesaria también para la biblioteca estándar.
  \end{itemize}
\end{frame}

\defverbatim[colored]\testcode{
\begin{lstlisting}
>>> from cmath import sqrt
>>> i = sqrt(-1)
>>> i.real
0.0
>>> i.imag
1.0
\end{lstlisting}
}
\begin{frame}
  \frametitle{Orientado a Objetos}
  \begin{itemize}
  \item Todo en Python es un objeto
  \item Los módulos son objetos
  \item Casi toda la biblioteca estándar es una biblioteca de clases.
  \end{itemize}
\testcode
\end{frame}

\begin{frame}
  \frametitle{Ampliable}
  \begin{itemize}
  \item CPython está escrito en C
  \item Podemos enlazar dinámicamente extensiones en C, C++ y Fortran
    siempre que se compilen con el mismo compilador.
  \item Para escribir extensiones no es necesario escribir extensiones
\pause
  \item Pyrex/Cython
  \item Boost::Python
  \item Weave (inlining)
  \item f2py
  \end{itemize}
\end{frame}


\begin{frame}
 \frametitle{Librería Estándar}
 \begin{itemize}
 \item Interacción con el SO \emph{portable}
 \item XML
 \item Sqlite
 \item Regular Expressions
 \item Timezones
 \item Creación de instaladores
 \item Debugger / Profiler
 \end{itemize}
\end{frame}

\section{¿Para qué uso Python?}
\begin{frame}
  \frametitle{¿Qué necesita un científico?}
  \begin{itemize}
  \item Arrays (NumPy)
  \item Cálculo Numérico (SciPy)
  \item Cálculo Simbólico (SymPy)
  \item Representación gráfica (Matplotlib)
  \item Visualización (PyVTK)
  \item Documentación (Sphinx)
  \item Test (Pylib)
  \item GUI (PyQt, PyGTK)
  \item Informes (Reportlab)
  \item Notebook (SAGE)
  \end{itemize}
\end{frame}

\section{¿Qué hace la gente lista con Python?}

\begin{frame}
  \frametitle{Infraestructuras}
  \begin{itemize}
  \item Youtube
  \item Launchpad 
  \item Lamson
  \item EVE Online
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Lenguaje de Scripting auxiliar}
  \begin{itemize}
  \item Catia
  \item AppEngine (Google)
  \item Paraview
  \item Shuttle Program
  \item Airbus Indrustrie
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Investigación sobre máquinas virtuales}
  \begin{itemize}
  \item PyPy (Python)
  \item Jython (Java)
  \item IronPython (.NET/CLI)
  \item Unladen Swallow (Google)
  \end{itemize}
\end{frame}

\section{¿Cómo uso Python?}

\begin{frame}
  \frametitle{Un ejemplo práctico}
\end{frame}



\defverbatim[colored]\testcode{
  \begin{lstlisting}
    >>> 2+2 #Suma
    4
    >>> 2-1 #Resta
    1
    >>> 2*4.5 #Multiplicacion
    9.0
    >>> 2/4.5 #Division
    0.44444444444444442
  \end{lstlisting}}

\begin{frame}
  \frametitle{Operaciones aritméticas}
  \testcode
  \begin{itemize}
  \item División entera (Python 3.x)
  \item Potencia
  \end{itemize}
\end{frame}

\defverbatim[colored]\testcode{
  \begin{lstlisting}
    >>> import math as m
    >>> import cmath as c
    >>> a=3.0+4.0j
    >>> a/complex(2,1.3)
    (1.968365553602812+0.72056239015817214j)
    >>> c.exp(_)
    (5.3794960137747223+4.7235385533272529j)
    >>> m.exp(abs(_))
    1285.5809221999864
  \end{lstlisting}}

\begin{frame}
  \frametitle{Números complejos y módulos}
  \testcode
\end{frame}


\defverbatim[colored]\testcode{
  \begin{lstlisting}
    >>> import cmath
    >>> help(cmath.acos)
    Help on built-in function acos in module cmath:

    acos(...)
    acos(x)

    Return the arc cosine of x.
  \end{lstlisting}
}
\begin{frame}
  \frametitle{Ayuda}
  \testcode
\end{frame}

\defverbatim[colored]\testcode{
  \begin{lstlisting}
    >>> x = int(raw_input("Por favor, introduzca un entero: "))
    >>> if x < 0:
    ...      x = 0
    ...      print 'Era negativo y lo he cambiado a cero'
    ... elif x == 0:
    ...      print 'Cero'
    ... elif x == 1:
    ...      print 'Uno'
    ... else:
    ...      print 'Mas'
    ...
  \end{lstlisting}
}
\begin{frame}
  \frametitle{If}
  \testcode
\end{frame}

\defverbatim[colored]\testcode{
  \begin{lstlisting}
    >>> a = ['gato', 'ventana', 'defenestrar']
    >>> for x in a:
    ...     print x, len(x)
    ... 
    gato 4
    ventana 7
    defenestrar 11
    >>> for x in a: # Haced esto y morid
    ...    if len(x) > 6: a.insert(0, x)
  \end{lstlisting}
}
\begin{frame}
  \frametitle{for}
  ¡\textbf{Es un iterador}!
  \testcode
\end{frame}

\defverbatim[colored]\testcode{
  \begin{lstlisting}
    >>> range(4)
    [0, 1, 2, 3]
    >>> range(3,12,3)
    [3, 6, 9]
  \end{lstlisting}
}
\begin{frame}
  \frametitle{range}
  \testcode
\end{frame}


\defverbatim[colored]\testcode{
  \begin{lstlisting}
    def fib2(n): 
    """Devuelve una lista con la serie de 
    Fibonacci hasta n."""
    result = []
    (a, b) = (0, 1)
    while b < n:
    result.append(b)
    (a, b) = (b, a+b)
    return result
  \end{lstlisting}
}
\begin{frame}
  \frametitle{Definición de funciones}
  \testcode
\end{frame}


\defverbatim[colored]\testcode{
  \begin{lstlisting}
    >>> def make_incrementor(n):
    ...     return lambda x: x + n
    ...
    >>> f = make_incrementor(42)
    >>> f(0)
    42
    >>> f(1)
    43
  \end{lstlisting}
}
\begin{frame}
  \frametitle{Funciones Lambda}
  \testcode
\end{frame}


\begin{frame}
  \frametitle{Tipos}
  \begin{itemize}
  \item Enteros
  \item Números en coma flotante
  \item Números complejos
  \item Cadenas de texto
  \item Listas
  \item Tuples
  \item Conjuntos
  \item Diccionarios
  \end{itemize}
\end{frame}

\defverbatim[colored]\testcode{
  \begin{lstlisting}
    a.__add__           a.__iadd__          a.__rmul__
    a.__class__         a.__imul__          a.__setattr__
    a.__contains__      a.__init__          a.__setitem__
    a.__delattr__       a.__iter__          a.__setslice__
    a.__delitem__       a.__le__            a.__str__
    a.__delslice__      a.__len__           a.append
    a.__doc__           a.__lt__            a.count
    a.__eq__            a.__mul__           a.extend
    a.__ge__            a.__ne__            a.index
    a.__getattribute__  a.__new__           a.insert
    a.__getitem__       a.__reduce__        a.pop
    a.__getslice__      a.__reduce_ex__     a.remove
    a.__gt__            a.__repr__          a.reverse
    a.__hash__          a.__reversed__      a.sort
  \end{lstlisting}
}
\begin{frame}
  \frametitle{Listas}
  \begin{scriptsize}
    \testcode
  \end{scriptsize}
\end{frame}

\defverbatim[colored]\testcode{
  \begin{lstlisting}
    >>> [(x, x**2) for x in vec]
    [(2, 4), (4, 16), (6, 36)]
    >>> vec1 = [2, 4, 6]
    >>> vec2 = [4, 3, -9]
    >>> [x*y for x in vec1 for y in vec2]
    [8, 6, -18, 16, 12, -36, 24, 18, -54]
    >>> [x+y for x in vec1 for y in vec2]
    [6, 5, -7, 8, 7, -5, 10, 9, -3]
    >>> [vec1[i]*vec2[i] for i in range(len(vec1))]
    [8, 12, -54]
  \end{lstlisting}
}
\begin{frame}
  \frametitle{List comprehensions}
  \testcode
\end{frame}

\begin{frame}
  \frametitle{Ejercicio}
  Crear una lista que contenga las cadenas de texto\texttt{uno},
  \texttt{dos}, \texttt{tres} y \texttt{cuatro}.  Mover los elementos
  que contienen la letra \emph{o} a una lista nueva. Primero hacerlo
  con un bucle y luego mediante un \emph{list comprehension} (en una
  línea).
\end{frame}
\defverbatim[colored]\testcode{
\begin{lstlisting}
 >>> class pato:
...     cantidad = 1
...     def haz_cua(self):
...           print "cua!"
...
...     def reproducete(self):
...           cantidad += 1
...
>>> estoesunpato=pato() #instancia de pato
>>> estoesunpato.cantidad
1
>>> estoesunpato.haz_cua()
cua!
\end{lstlisting} 
}

\begin{frame}
\frametitle{Duck typing}
\testcode
\end{frame}

\defverbatim[colored]\testcode{
\begin{lstlisting}
>>> estoesunpato=pato() #instancia de pato
>>> cuaqueador(estoesunpato)
cua!
>>> class guillem:
...     def haz_cua(self):
...             print "cua!"
...
>>> falsopato=guillem() #ese soy yo
>>> cuaqueador(falsopato)
cua!
>>> isinstance(falsopato,pato)
False
\end{lstlisting}
}
\begin{frame}
\frametitle{Duck typing}
\testcode

Si algo anda como un pato y hace cua como un pato para mi va a ser un pato.
Para la función cuaqueador yo soy tan pato como un pato.
\end{frame}

\begin{frame}
  \frametitle{Numpy. La clase Array}
\end{frame}

\begin{frame}
  \begin{center}
    ¿Preguntas?
  \end{center}
\end{frame}


\end{document}
